<!DOCTYPE html>
<html lang="en">
 <%- include('./partials/head.ejs') %>
<body>
<%- include('./partials/header.ejs') %>
<link rel="stylesheet" href="styles/styles.css">
<main>
<h1><%= blog.title  %></h1>
<h2><%= blog.snippet  %></h2>
<p><%= blog.body  %></p>
<a class="link delete"  data-doc="<%= blog._id %>">Delete</a>
<script>
    let deleteButton = document.querySelector('.delete');
    deleteButton.addEventListener('click' , e => {
        const endpoint = `/blogs/${deleteButton.dataset.doc}`
        fetch(endpoint , {
            method : 'DELETE'
        })
        .then(response => response.json())
        .then(data => location.href = data.redirect)
        .catch (err => {console.log(err)})
    })
</script>
</main>
</body>
<%- include('./partials/footer.ejs') %>
</html>